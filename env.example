# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL - Main Application Database
POSTGRES_USER=finanzas_user
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=finanzas_db
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# PostgreSQL - n8n User
POSTGRES_NON_ROOT_USER=n8n
POSTGRES_NON_ROOT_PASSWORD=n8n_secure_password

# n8n Database
N8N_DB=n8n

# =============================================================================
# LLM PROVIDERS
# =============================================================================

# OpenAI (Primary Provider)
OPENAI_API_KEY=sk-...
# Used for: Whisper API (audio transcription), GPT-4o (text extraction)

# Anthropic (Optional)
ANTHROPIC_API_KEY=sk-ant-...

# Google (Optional)
GOOGLE_API_KEY=...

# LLM Provider Selection
LLM_PROVIDER=openai
# Options: openai | anthropic | google

# =============================================================================
# LLAMAPARSE (Receipt/Document Parsing)
# =============================================================================

LLAMAPARSE_API_KEY=llx-...
# Used for: Parsing receipts and invoices from images and PDFs

# =============================================================================
# AUDIO PROCESSING
# =============================================================================

# Whisper Configuration
WHISPER_PROVIDER=api
# Options: api (OpenAI Whisper API) | local (faster-whisper)

WHISPER_MODEL=whisper-1
# For API: whisper-1
# For local: base | medium | large | large-v2 | large-v3

# =============================================================================
# OBJECT STORAGE (MinIO)
# =============================================================================

MINIO_HOST=localhost
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET_NAME=finanzas-receipts

# =============================================================================
# LOGGING
# =============================================================================

LOG_LEVEL=DEBUG
# Options: DEBUG | INFO | WARNING | ERROR | CRITICAL

LOG_FORMAT=json
# Options: json | console

# =============================================================================
# LANGCHAIN TRACING (Optional - LangSmith)
# =============================================================================

LANGCHAIN_TRACING_V2=false
LANGCHAIN_API_KEY=ls-...
LANGCHAIN_PROJECT=finanzas-mvp

# =============================================================================
# PROMPT MANAGEMENT (Future - Langfuse)
# =============================================================================

LANGFUSE_PUBLIC_KEY=pk-lf-...
LANGFUSE_SECRET_KEY=sk-lf-...
LANGFUSE_HOST=https://cloud.langfuse.com

# Prompt source: local (files) | langfuse (API)
PROMPT_SOURCE=local

# =============================================================================
# n8n WORKFLOW AUTOMATION
# =============================================================================

# n8n Configuration
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=http
WEBHOOK_URL=http://localhost:5678/
TIMEZONE=America/Mexico_City

# n8n Authentication (Basic Auth - simpler for development)
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=finanzas_dev_2024

# Note: With Basic Auth enabled, n8n will use simple username/password
# Set to 'false' to use User Management (email-based login with roles)

# n8n Execution Settings
EXECUTIONS_TIMEOUT=300
EXECUTIONS_TIMEOUT_MAX=600

# n8n Logging
N8N_LOG_LEVEL=info
N8N_DIAGNOSTICS_ENABLED=false

# =============================================================================
# VECTOR DATABASE (Qdrant)
# =============================================================================

QDRANT_HOST=localhost
QDRANT_HTTP_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_API_KEY=
# Optional: API key for Qdrant authentication (leave empty for local development)

# =============================================================================
# VANNA AI CONFIGURATION
# =============================================================================

# Qdrant Collections for Vanna
VANNA_DDL_COLLECTION=vanna_ddl
VANNA_DOC_COLLECTION=vanna_documentation
VANNA_SQL_COLLECTION=vanna_sql

# Read-only database user for Vanna queries (security layer)
VANNA_DB_USER=vanna_reader
VANNA_DB_PASSWORD=vanna_readonly_secure_password

# Query execution limits
VANNA_QUERY_TIMEOUT_SECONDS=30
VANNA_MAX_RESULT_ROWS=1000

# Training configuration
VANNA_TRAINING_LLM_PROVIDER=openai
# Options: openai | anthropic

VANNA_EMBEDDING_MODEL=text-embedding-3-small
VANNA_VECTOR_DIMENSION=1536

# =============================================================================
# TWILIO WHATSAPP INTEGRATION
# =============================================================================

# Twilio Account Credentials (find at console.twilio.com)
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# WhatsApp Sandbox Number (Twilio provides this)
TWILIO_WHATSAPP_FROM=whatsapp:+14155238886

# Webhook Configuration
# Set this to your ngrok URL or production domain
WEBHOOK_BASE_URL=https://your-ngrok-url.ngrok.io
# The webhook path (do not change)
TWILIO_WEBHOOK_PATH=/api/v1/webhook/twilio

# =============================================================================
# CONVERSATION SETTINGS
# =============================================================================

# Session timeout in minutes (conversation expires after this)
CONVERSATION_TIMEOUT_MINUTES=30

# Maximum messages per conversation
MAX_CONVERSATION_MESSAGES=100

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Environment
ENVIRONMENT=development
# Options: development | staging | production

# Security
SECRET_KEY=your-secret-key-here-change-in-production

# Confidence Threshold for Auto-confirmation
CONFIDENCE_THRESHOLD=0.7


